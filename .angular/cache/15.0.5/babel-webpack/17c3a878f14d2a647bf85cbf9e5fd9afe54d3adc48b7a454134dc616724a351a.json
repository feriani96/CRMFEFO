{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet EditComponent = class EditComponent {\n  constructor(elementRef, dataUtils, eventManager, fb, route, router, productService) {\n    this.elementRef = elementRef;\n    this.dataUtils = dataUtils;\n    this.eventManager = eventManager;\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.productService = productService;\n    this.productForm = {\n      id: '',\n      name: '',\n      price: 0,\n      photo: null,\n      photoContentType: '',\n      description: '',\n      tax: 0\n    };\n    this.formGroup = this.fb.group({\n      name: '',\n      price: 0,\n      photo: null,\n      photoContentType: null,\n      description: '',\n      tax: 17\n    });\n  }\n  ngOnInit() {\n    this.route.paramMap.subscribe(param => {\n      var id = String(param.get('id'));\n      this.getById(id);\n    });\n  }\n  getById(id) {\n    this.productService.getById(id).subscribe(data => {\n      this.productForm = data;\n    });\n  }\n  update() {\n    this.productService.update(this.productForm).subscribe({\n      next: data => {\n        this.router.navigate([\"/product/home\"]);\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n  }\n  //--------------JN ADD MAIN PHOTO STARTS--------//\n  byteSize(base64String) {\n    return this.dataUtils.byteSize(base64String);\n  }\n  openFile(base64String, contentType) {\n    this.dataUtils.openFile(base64String, contentType);\n  }\n  setFileData(event, field, isImage) {\n    this.dataUtils.loadFileToForm(event, this.formGroup, field, isImage).subscribe({\n      error: err => this.eventManager.broadcast('big error')\n    });\n  }\n  clearInputImage(field, fieldContentType, idInput) {\n    this.formGroup.patchValue({\n      [field]: null,\n      [fieldContentType]: null\n    });\n    if (idInput && this.elementRef.nativeElement.querySelector('#' + idInput)) {\n      this.elementRef.nativeElement.querySelector('#' + idInput).value = null;\n    }\n  }\n};\nEditComponent = __decorate([Component({\n  selector: 'app-edit',\n  templateUrl: './edit.component.html',\n  styleUrls: ['./edit.component.css']\n})], EditComponent);\nexport { EditComponent };","map":{"version":3,"mappings":"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","names":["Component","EditComponent","constructor","elementRef","dataUtils","eventManager","fb","route","router","productService","id","name","price","photo","photoContentType","description","tax","formGroup","group","ngOnInit","paramMap","subscribe","param","String","get","getById","data","productForm","update","next","navigate","error","err","console","log","byteSize","base64String","openFile","contentType","setFileData","event","field","isImage","loadFileToForm","broadcast","clearInputImage","fieldContentType","idInput","patchValue","nativeElement","querySelector","value","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/hp/Desktop/crm project/CRMFEFO/src/app/product/edit/edit.component.ts"],"sourcesContent":["import { Component, ElementRef, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Product } from 'src/app/models/Product';\nimport { DataUtils,FileLoadError} from 'src/app/service/data-util.service';\nimport { EventManager } from 'src/app/service/event-manager.service';\nimport { ProductService } from 'src/app/service/product.service';\n\n@Component({\n  selector: 'app-edit',\n  templateUrl: './edit.component.html',\n  styleUrls: ['./edit.component.css']\n})\n\nexport class EditComponent implements OnInit {\n\n  formGroup!: FormGroup;\n\n  productForm: Product = {\n\n    id: '',\n    name: '',\n    price: 0,\n    photo: null,\n    photoContentType: '',\n    description: '',\n    tax: 0,\n\n  };\n\n  \n \n\n  constructor(\n    protected elementRef: ElementRef,\n    protected dataUtils: DataUtils,\n    protected eventManager: EventManager,\n    private fb: FormBuilder,\n    private route: ActivatedRoute,\n    private router: Router,\n    private productService: ProductService,\n  ) { \n     \n    this.formGroup = this.fb.group({\n      name: '',\n      price: 0,\n      photo: null,\n      photoContentType: null,\n      description: '',\n      tax: 17,\n\n    });\n   \n\n  }\n\n\n  ngOnInit(): void {\n    this.route.paramMap.subscribe((param) => {\n      var id = String(param.get('id'));\n      this.getById(id);\n    });\n  }\n\n  getById(id: string) {\n    this.productService.getById(id).subscribe((data) => {\n      this.productForm = data;\n    });\n  }\n\n  update() {\n    this.productService.update(this.productForm)\n      .subscribe({\n        next: (data) => {\n          this.router.navigate([\"/product/home\"]);\n        },\n        error: (err) => {\n          console.log(err);\n        }\n      })\n  }\n\n//--------------JN ADD MAIN PHOTO STARTS--------//\n\n\nbyteSize(base64String: string): string {\n  return this.dataUtils.byteSize(base64String);\n}\n\nopenFile(base64String: string, contentType: string | null | undefined): void {\n  this.dataUtils.openFile(base64String, contentType);\n}\n\n\n\nsetFileData(event: Event, field: string, isImage: boolean): void {\n  this.dataUtils.loadFileToForm(event, this.formGroup,field, isImage).subscribe({\n    error: (err: FileLoadError) =>\n      this.eventManager.broadcast('big error'),\n  });\n}\n\n\nclearInputImage(field: string, fieldContentType: string, idInput: string): void {\n  this.formGroup.patchValue({\n    [field]: null,\n    [fieldContentType]: null,\n  });\n  if (idInput && this.elementRef.nativeElement.querySelector('#' + idInput)) {\n    this.elementRef.nativeElement.querySelector('#' + idInput).value = null;\n  }\n}\n\n\n//--------------JN ADD MAIN PHOTO ENDS--------//\n\n\n\n\n}\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}