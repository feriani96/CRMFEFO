{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/auth.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/app/_services/token-storage.service\";\nexport class RegisterComponent {\n  constructor(router, authService, formBuilder, tokenStorage) {\n    this.router = router;\n    this.authService = authService;\n    this.formBuilder = formBuilder;\n    this.tokenStorage = tokenStorage;\n    /* formRegister:any={\n      username:null,\n      email:null,\n      password:null\n    };\n    */\n    /*isSuccessful = false;\n    isSignUpFailed = false;*/\n    this.errorMessage = '';\n    this.formLogin = {\n      username: null,\n      password: null\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage2 = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    /*this.formRegister = this.formBuilder.group({\n        username: ['',Validators.required],\n        email: ['',Validators.required],\n        password: ['',Validators.required],\n       \n      });*/\n    this.formLogin = this.formBuilder.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n    if (this.tokenStorage.getToken()) {\n      this.isLoggedIn = true;\n      this.roles = this.tokenStorage.getUser().roles;\n    }\n  }\n  /*\n  onSubmitRegister(): void {\n  const { username, email, password } = this.formRegister;\n  console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\n  this.authService.register(username, email, password).subscribe({\n    next: (data: any) => {\n      console.log(\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\");\n      console.log(data);\n      this.isSuccessful = true;\n      this.isSignUpFailed = false;\n    },\n    error: (err: { error: { message: any; }; }) => {\n      this.errorMessage = err.error.message;\n      this.isSignUpFailed = true;\n    }\n  });\n  }*/\n  onSubmitLogin() {\n    const {\n      username,\n      password\n    } = this.formLogin;\n    console.log(\"test\");\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        console.log(\"data : \", data);\n        this.tokenStorage.saveToken(data.accessToken);\n        this.tokenStorage.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.tokenStorage.getUser().roles;\n        console.log(\"Roles : \", this.roles);\n        console.log(\"user : \", this.tokenStorage.getUser());\n        this.router.navigate(['product/home']);\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.TokenStorageService));\n};\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 34,\n  vars: 0,\n  consts: [[1, \"vh-100\", 2, \"background-color\", \"#1d9d7f\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col\", \"col-xl-10\"], [1, \"card\", 2, \"border-radius\", \"1rem\"], [1, \"row\", \"g-0\"], [1, \"col-md-6\", \"col-lg-5\", \"d-none\", \"d-md-block\"], [\"src\", \"/assets/img/registration.jpg\", \"alt\", \"login form\", 1, \"img-fluid\", 2, \"border-radius\", \"1rem 0 0 1rem\"], [1, \"col-md-6\", \"col-lg-7\", \"d-flex\", \"align-items-center\"], [1, \"card-body\", \"p-4\", \"p-lg-5\", \"text-black\"], [1, \"d-flex\", \"align-items-center\", \"mb-3\", \"pb-1\"], [1, \"fas\", \"fa-cubes\", \"fa-2x\", \"me-3\", 2, \"color\", \"#ff6219\"], [1, \"h1\", \"fw-bold\", \"mb-0\"], [1, \"form-outline\", \"mb-4\"], [\"type\", \"username\", \"id\", \"form2Example17\", 1, \"form-control\", \"form-control-lg\"], [\"for\", \"form2Example17\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"form2Example17\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"password\", \"id\", \"form2Example27\", 1, \"form-control\", \"form-control-lg\"], [\"for\", \"form2Example27\", 1, \"form-label\"], [1, \"pt-1\", \"mb-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-dark\", \"btn-lg\", \"btn-block\"], [1, \"mb-5\", \"pb-lg-2\", 2, \"color\", \"#1d9d7f\"], [\"routerLink\", \"/login\", 2, \"color\", \"#1d9d7f\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n      i0.ɵɵelement(7, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 8)(9, \"div\", 9)(10, \"form\")(11, \"div\", 10);\n      i0.ɵɵelement(12, \"i\", 11);\n      i0.ɵɵelementStart(13, \"span\", 12);\n      i0.ɵɵtext(14, \"Invoice App\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 13);\n      i0.ɵɵelement(16, \"input\", 14);\n      i0.ɵɵelementStart(17, \"label\", 15);\n      i0.ɵɵtext(18, \"name\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 13);\n      i0.ɵɵelement(20, \"input\", 16);\n      i0.ɵɵelementStart(21, \"label\", 15);\n      i0.ɵɵtext(22, \"Email address\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 13);\n      i0.ɵɵelement(24, \"input\", 17);\n      i0.ɵɵelementStart(25, \"label\", 18);\n      i0.ɵɵtext(26, \"Password\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(27, \"div\", 19)(28, \"button\", 20);\n      i0.ɵɵtext(29, \"register\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"p\", 21);\n      i0.ɵɵtext(31, \"already have account \");\n      i0.ɵɵelementStart(32, \"a\", 22);\n      i0.ɵɵtext(33, \"login here\");\n      i0.ɵɵelementEnd()()()()()()()()()()();\n    }\n  },\n  dependencies: [i1.RouterLink, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","RegisterComponent","constructor","router","authService","formBuilder","tokenStorage","username","password","ngOnInit","formLogin","group","required","getToken","isLoggedIn","roles","getUser","onSubmitLogin","console","log","login","subscribe","next","data","saveToken","accessToken","saveUser","isLoginFailed","navigate","error","err","errorMessage","message","reloadPage","window","location","reload","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/home/hp/Desktop/crm project/CRMFEFO/src/app/auth/register/register.component.ts","/home/hp/Desktop/crm project/CRMFEFO/src/app/auth/register/register.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators ,FormGroup} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/service/auth.service';\nimport { TokenStorageService } from 'src/app/_services/token-storage.service';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent implements OnInit{\n\n  /* formRegister:any={\n    username:null,\n    email:null,\n    password:null\n};\n*/\n  /*isSuccessful = false;\n  isSignUpFailed = false;*/\n  errorMessage = '';\n\n  formLogin: any = {\n    username: null,\n    password: null\n  };\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage2 = '';\n  roles: string[] = []; \n\n  \n\nconstructor(private router: Router,\nprivate authService: AuthService,\nprivate formBuilder: FormBuilder, \nprivate tokenStorage: TokenStorageService) { }\n\nngOnInit(): void {\n/*this.formRegister = this.formBuilder.group({\n    username: ['',Validators.required],\n    email: ['',Validators.required],\n    password: ['',Validators.required],\n   \n  });*/\n\n  this.formLogin = this.formBuilder.group({\n    username: ['', Validators.required],\n    password: ['', Validators.required]\n});\n\n\n  if (this.tokenStorage.getToken()) {\n    this.isLoggedIn = true;\n    this.roles = this.tokenStorage.getUser().roles;\n  } \n}\n/*\nonSubmitRegister(): void {\nconst { username, email, password } = this.formRegister;\nconsole.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\nthis.authService.register(username, email, password).subscribe({\n  next: (data: any) => {\n    console.log(\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\");\n    console.log(data);\n    this.isSuccessful = true;\n    this.isSignUpFailed = false;\n  },\n  error: (err: { error: { message: any; }; }) => {\n    this.errorMessage = err.error.message;\n    this.isSignUpFailed = true;\n  }\n});\n}*/\n\nonSubmitLogin(): void {\nconst { username, password } = this.formLogin;\nconsole.log(\"test\");\n\nthis.authService.login(username, password).subscribe({\n  next: data => {\n    console.log(\"data : \", data); \n    this.tokenStorage.saveToken(data.accessToken);\n    this.tokenStorage.saveUser(data);\n\n    this.isLoginFailed = false;\n    this.isLoggedIn = true;\n    this.roles = this.tokenStorage.getUser().roles;\n\n    console.log(\"Roles : \", this.roles);   \n    console.log(\"user : \", this.tokenStorage.getUser()) ;    \n    this.router.navigate(['product/home']);\n  },\n  error: err => {\n    this.errorMessage = err.error.message;\n    this.isLoginFailed = true;\n  }\n});\n}\n\nreloadPage(): void {\nwindow.location.reload();\n}\n\n\n}\n","\n<section class=\"vh-100\" style=\"background-color: #1d9d7f;\">\n    <div class=\"container py-5 h-100\">\n      <div class=\"row d-flex justify-content-center align-items-center h-100\">\n        <div class=\"col col-xl-10\">\n          <div class=\"card\" style=\"border-radius: 1rem;\">\n            <div class=\"row g-0\">\n              <div class=\"col-md-6 col-lg-5 d-none d-md-block\">\n                <img src=\"/assets/img/registration.jpg\"\n                  alt=\"login form\" class=\"img-fluid\" style=\"border-radius: 1rem 0 0 1rem;\" />\n              </div>\n              <div class=\"col-md-6 col-lg-7 d-flex align-items-center\">\n                <div class=\"card-body p-4 p-lg-5 text-black\">\n  \n                  <form>\n  \n                    <div class=\"d-flex align-items-center mb-3 pb-1\">\n                      <i class=\"fas fa-cubes fa-2x me-3\" style=\"color: #ff6219;\"></i>\n                      <span class=\"h1 fw-bold mb-0\">Invoice App</span>\n                    </div>\n  \n                  \n                    <div class=\"form-outline mb-4\">\n                        <input type=\"username\" id=\"form2Example17\" class=\"form-control form-control-lg\" />\n                        <label class=\"form-label\" for=\"form2Example17\">name</label>\n                      </div>\n\n                    <div class=\"form-outline mb-4\">\n                      <input type=\"email\" id=\"form2Example17\" class=\"form-control form-control-lg\" />\n                      <label class=\"form-label\" for=\"form2Example17\">Email address</label>\n                    </div>\n  \n                    <div class=\"form-outline mb-4\">\n                      <input type=\"password\" id=\"form2Example27\" class=\"form-control form-control-lg\" />\n                      <label class=\"form-label\" for=\"form2Example27\">Password</label>\n                    </div>\n  \n                    <div class=\"pt-1 mb-4\">\n                      <button class=\"btn btn-dark btn-lg btn-block\" type=\"button\">register</button>\n                    </div>\n                    \n                    <p class=\"mb-5 pb-lg-2\" style=\"color: #1d9d7f;\" >already have account <a routerLink=\"/login\"\n                        style=\"color: #1d9d7f;\">login here</a></p>\n                  \n                  </form>\n  \n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}