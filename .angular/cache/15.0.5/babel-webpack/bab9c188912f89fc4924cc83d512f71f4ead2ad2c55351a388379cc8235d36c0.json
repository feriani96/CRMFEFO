{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/auth.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/app/_services/token-storage.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginComponent_div_28_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_28_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password must be at least 3 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtemplate(1, LoginComponent_div_28_div_1_Template, 2, 0, \"div\", 29);\n    i0.ɵɵtemplate(2, LoginComponent_div_28_div_2_Template, 2, 0, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r0 = i0.ɵɵreference(27);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r0.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Login failed!\");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.errorMessage2, \" \");\n  }\n}\nfunction LoginComponent_form_45_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Username is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_45_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_45_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password must be at least 3 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_form_45_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtemplate(1, LoginComponent_form_45_div_15_div_1_Template, 2, 0, \"div\", 29);\n    i0.ɵɵtemplate(2, LoginComponent_form_45_div_15_div_2_Template, 2, 0, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r9 = i0.ɵɵreference(14);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_form_45_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵtext(1, \" Login failed!\");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r11.errorMessage2, \" \");\n  }\n}\nfunction LoginComponent_form_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 31, 32);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_45_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const _r6 = i0.ɵɵreference(1);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(_r6.form.valid && ctx_r14.onSubmitLogin());\n    });\n    i0.ɵɵelementStart(2, \"label\", 33);\n    i0.ɵɵtext(3, \"Username or email address \");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"input\", 34, 35);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_45_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.formLogin.username = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, LoginComponent_form_45_div_8_Template, 2, 0, \"div\", 20);\n    i0.ɵɵelementStart(9, \"label\", 17);\n    i0.ɵɵtext(10, \"Password \");\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"input\", 18, 19);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_45_Template_input_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.formLogin.password = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, LoginComponent_form_45_div_15_Template, 3, 2, \"div\", 20);\n    i0.ɵɵelementStart(16, \"div\", 36)(17, \"span\", 37);\n    i0.ɵɵelement(18, \"input\", 38);\n    i0.ɵɵelementStart(19, \"label\", 39);\n    i0.ɵɵtext(20, \"Remember me\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"span\", 40)(22, \"a\", 41);\n    i0.ɵɵtext(23, \"Lost your password?\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"div\", 42)(25, \"button\", 43);\n    i0.ɵɵtext(26, \"Login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(27, LoginComponent_form_45_div_27_Template, 4, 1, \"div\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r6 = i0.ɵɵreference(1);\n    const _r7 = i0.ɵɵreference(7);\n    const _r9 = i0.ɵɵreference(14);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.formLogin.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors && _r6.submitted);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.formLogin.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors && _r6.submitted);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", _r6.submitted && ctx_r3.isLoginFailed);\n  }\n}\nexport class LoginComponent {\n  constructor(router, authService, formBuilder, tokenStorage) {\n    this.router = router;\n    this.authService = authService;\n    this.formBuilder = formBuilder;\n    this.tokenStorage = tokenStorage;\n    this.formRegister = {\n      username: null,\n      email: null,\n      password: null\n    };\n    this.isSuccessful = false;\n    this.isSignUpFailed = false;\n    this.errorMessage = '';\n    this.formLogin = {\n      username: null,\n      password: null\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage2 = '';\n    this.roles = [];\n  }\n  ngOnInit() {\n    this.formRegister = this.formBuilder.group({\n      username: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n    this.formLogin = this.formBuilder.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n    if (this.tokenStorage.getToken()) {\n      this.isLoggedIn = true;\n      this.roles = this.tokenStorage.getUser().roles;\n    }\n  }\n  onSubmitRegister() {\n    const {\n      username,\n      email,\n      password\n    } = this.formRegister;\n    console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\n    this.authService.register(username, email, password).subscribe({\n      next: data => {\n        console.log(\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\");\n        console.log(data);\n        this.isSuccessful = true;\n        this.isSignUpFailed = false;\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isSignUpFailed = true;\n      }\n    });\n  }\n  onSubmitLogin() {\n    const {\n      username,\n      password\n    } = this.formLogin;\n    console.log(\"test\");\n    this.authService.login(username, password).subscribe({\n      next: data => {\n        console.log(\"data : \", data);\n        this.tokenStorage.saveToken(data.accessToken);\n        this.tokenStorage.saveUser(data);\n        this.isLoginFailed = false;\n        this.isLoggedIn = true;\n        this.roles = this.tokenStorage.getUser().roles;\n        console.log(\"Roles : \", this.roles);\n        console.log(\"user : \", this.tokenStorage.getUser());\n        this.router.navigate(['product/home']);\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.TokenStorageService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 46,\n  vars: 4,\n  consts: [[1, \"vh-100\", 2, \"background-color\", \"#1d9d7f\"], [1, \"container\", \"py-5\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col\", \"col-xl-10\"], [1, \"card\", 2, \"border-radius\", \"1rem\"], [1, \"row\", \"g-0\"], [1, \"col-md-6\", \"col-lg-5\", \"d-none\", \"d-md-block\"], [\"src\", \"/assets/img/login.jpg\", \"alt\", \"login form\", 1, \"img-fluid\", 2, \"border-radius\", \"1rem 0 0 1rem\"], [1, \"col-md-6\", \"col-lg-7\", \"d-flex\", \"align-items-center\"], [1, \"card-body\", \"p-4\", \"p-lg-5\", \"text-black\"], [1, \"d-flex\", \"align-items-center\", \"mb-3\", \"pb-1\"], [1, \"fas\", \"fa-cubes\", \"fa-2x\", \"me-3\", 2, \"color\", \"#ff6219\"], [1, \"h1\", \"fw-bold\", \"mb-0\"], [1, \"fw-normal\", \"mb-3\", \"pb-3\", 2, \"letter-spacing\", \"1px\"], [1, \"form-outline\", \"mb-4\"], [\"type\", \"email\", \"id\", \"form2Example17\", 1, \"form-control\", \"form-control-lg\"], [\"for\", \"form2Example17\", 1, \"form-label\"], [\"for\", \"pass\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"3\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\", \"pt-1\", \"mb-4\"], [\"type\", \"button\", 1, \"btn\", \"btn-dark\", \"btn-lg\", \"btn-block\"], [\"class\", \"alert alert-warning\", 4, \"ngIf\"], [\"href\", \"#!\", 1, \"small\", \"text-muted\"], [1, \"mb-5\", \"pb-lg-2\", 2, \"color\", \"#1d9d7f\"], [\"routerLink\", \"/register\", 2, \"color\", \"#1d9d7f\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [1, \"alert\", \"alert-warning\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [\"for\", \"name\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [1, \"login-action\", \"mb-10\", \"fix\"], [1, \"log-rem\", \"f-left\"], [\"id\", \"remember\", \"type\", \"checkbox\"], [\"for\", \"remember\"], [1, \"forgot-login\", \"f-right\"], [\"href\", \"#\"], [1, \"form-group\"], [1, \"tp-in-btn\", \"w-100\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6);\n      i0.ɵɵelement(7, \"img\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 8)(9, \"div\", 9)(10, \"form\")(11, \"div\", 10);\n      i0.ɵɵelement(12, \"i\", 11);\n      i0.ɵɵelementStart(13, \"span\", 12);\n      i0.ɵɵtext(14, \"Invoice App\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"h5\", 13);\n      i0.ɵɵtext(16, \"Sign into your account\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 14);\n      i0.ɵɵelement(18, \"input\", 15);\n      i0.ɵɵelementStart(19, \"label\", 16);\n      i0.ɵɵtext(20, \"Email address\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"div\", 14)(22, \"label\", 17);\n      i0.ɵɵtext(23, \"Password \");\n      i0.ɵɵelementStart(24, \"span\");\n      i0.ɵɵtext(25, \"*\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"input\", 18, 19);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.formLogin.password = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(28, LoginComponent_div_28_Template, 3, 2, \"div\", 20);\n      i0.ɵɵelementStart(29, \"div\", 21)(30, \"button\", 22);\n      i0.ɵɵtext(31, \"Login\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(32, LoginComponent_div_32_Template, 4, 1, \"div\", 23);\n      i0.ɵɵelementStart(33, \"a\", 24);\n      i0.ɵɵtext(34, \"Forgot password?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"p\", 25);\n      i0.ɵɵtext(36, \"Don't have an account? \");\n      i0.ɵɵelementStart(37, \"a\", 26);\n      i0.ɵɵtext(38, \"Register here\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"a\", 24);\n      i0.ɵɵtext(40, \"Terms of use.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"a\", 24);\n      i0.ɵɵtext(42, \"Privacy policy\");\n      i0.ɵɵelementEnd()()()()()()()()()();\n      i0.ɵɵelementStart(43, \"h5\");\n      i0.ɵɵtext(44, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(45, LoginComponent_form_45_Template, 28, 5, \"form\", 27);\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(27);\n      i0.ɵɵadvance(26);\n      i0.ɵɵproperty(\"ngModel\", ctx.formLogin.password);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r0.errors && ctx.f.submitted);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.f.submitted && ctx.isLoginFailed);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i5.NgIf, i1.RouterLink, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinLengthValidator, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Validators","i0","ctx_r14","LoginComponent","constructor","router","authService","formBuilder","tokenStorage","username","email","password","ngOnInit","formRegister","group","required","formLogin","getToken","isLoggedIn","roles","getUser","onSubmitRegister","console","log","register","subscribe","next","data","isSuccessful","isSignUpFailed","error","err","errorMessage","message","onSubmitLogin","login","saveToken","accessToken","saveUser","isLoginFailed","navigate","reloadPage","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/hp/Desktop/crm project/CRMFEFO/src/app/auth/login/login.component.ts","/home/hp/Desktop/crm project/CRMFEFO/src/app/auth/login/login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators ,FormGroup} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/service/auth.service';\nimport { TokenStorageService } from 'src/app/_services/token-storage.service';\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\n\nexport class LoginComponent implements OnInit{\n  formRegister:any={\n    username:null,\n    email:null,\n    password:null\n};\n\n  isSuccessful = false;\n  isSignUpFailed = false;\n  errorMessage = '';\n\n  formLogin: any = {\n    username: null,\n    password: null\n  };\n  isLoggedIn = false;\n  isLoginFailed = false;\n  errorMessage2 = '';\n  roles: string[] = []; \n\n  \n\nconstructor(private router: Router,\nprivate authService: AuthService,\nprivate formBuilder: FormBuilder, \nprivate tokenStorage: TokenStorageService) { }\n\nngOnInit(): void {\nthis.formRegister = this.formBuilder.group({\n    username: ['',Validators.required],\n    email: ['',Validators.required],\n    password: ['',Validators.required],\n   \n  });\n\n  this.formLogin = this.formBuilder.group({\n    username: ['', Validators.required],\n    password: ['', Validators.required]\n});\n\n\n  if (this.tokenStorage.getToken()) {\n    this.isLoggedIn = true;\n    this.roles = this.tokenStorage.getUser().roles;\n  } \n}\n\nonSubmitRegister(): void {\nconst { username, email, password } = this.formRegister;\nconsole.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\nthis.authService.register(username, email, password).subscribe({\n  next: (data: any) => {\n    console.log(\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\");\n    console.log(data);\n    this.isSuccessful = true;\n    this.isSignUpFailed = false;\n  },\n  error: (err: { error: { message: any; }; }) => {\n    this.errorMessage = err.error.message;\n    this.isSignUpFailed = true;\n  }\n});\n}\n\nonSubmitLogin(): void {\nconst { username, password } = this.formLogin;\nconsole.log(\"test\");\n\nthis.authService.login(username, password).subscribe({\n  next: data => {\n    console.log(\"data : \", data); \n    this.tokenStorage.saveToken(data.accessToken);\n    this.tokenStorage.saveUser(data);\n\n    this.isLoginFailed = false;\n    this.isLoggedIn = true;\n    this.roles = this.tokenStorage.getUser().roles;\n\n    console.log(\"Roles : \", this.roles);   \n    console.log(\"user : \", this.tokenStorage.getUser()) ;    \n    this.router.navigate(['product/home']);\n  },\n  error: err => {\n    this.errorMessage = err.error.message;\n    this.isLoginFailed = true;\n  }\n});\n}\n\nreloadPage(): void {\nwindow.location.reload();\n}\n\n}\n","<!--------design start--------->\n<section class=\"vh-100\" style=\"background-color: #1d9d7f;\">\n    <div class=\"container py-5 h-100\">\n      <div class=\"row d-flex justify-content-center align-items-center h-100\">\n        <div class=\"col col-xl-10\">\n          <div class=\"card\" style=\"border-radius: 1rem;\">\n            <div class=\"row g-0\">\n              <div class=\"col-md-6 col-lg-5 d-none d-md-block\">\n                <img src=\"/assets/img/login.jpg\"\n                  alt=\"login form\" class=\"img-fluid\" style=\"border-radius: 1rem 0 0 1rem;\" />\n              </div>\n              <div class=\"col-md-6 col-lg-7 d-flex align-items-center\">\n                <div class=\"card-body p-4 p-lg-5 text-black\">\n  \n                  <form >\n  \n                    <div class=\"d-flex align-items-center mb-3 pb-1\">\n                      <i class=\"fas fa-cubes fa-2x me-3\" style=\"color: #ff6219;\"></i>\n                      <span class=\"h1 fw-bold mb-0\">Invoice App</span>\n                    </div>\n  \n                    <h5 class=\"fw-normal mb-3 pb-3\" style=\"letter-spacing: 1px;\">Sign into your account</h5>\n  \n                    <div class=\"form-outline mb-4\">\n                      <input type=\"email\" id=\"form2Example17\" class=\"form-control form-control-lg\" />\n                      <label class=\"form-label\" for=\"form2Example17\">Email address</label>\n                    </div>\n  \n                    <div class=\"form-outline mb-4\">\n                      <label for=\"pass\">Password <span>*</span></label>\n                     <input type=\"password\" class=\"form-control\" name=\"password\" [(ngModel)]=\"formLogin.password\" required minlength=\"3\"\n                     #password=\"ngModel\">\n                     </div>\n                     \n                     <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"password.errors && f.submitted\">\n                      <div *ngIf=\"password.errors['required']\">Password is required</div>\n                      <div *ngIf=\"password.errors['minlength']\">\n                        Password must be at least 3 characters\n                      </div>\n                    </div>\n  \n                    <div class=\" form-group pt-1 mb-4\" >\n                      <button class=\"btn btn-dark btn-lg btn-block\" type=\"button\">Login</button>\n                    </div>\n                   \n                    <div class=\"alert alert-warning\" *ngIf=\"f.submitted && isLoginFailed\">\n                      Login failed!<br />{{ errorMessage2 }}\n                  </div>\n\n                    <a class=\"small text-muted\" href=\"#!\">Forgot password?</a>\n                    <p class=\"mb-5 pb-lg-2\" style=\"color: #1d9d7f;\" >Don't have an account? <a routerLink=\"/register\"\n                        style=\"color: #1d9d7f;\">Register here</a></p>\n                    <a href=\"#!\" class=\"small text-muted\">Terms of use.</a>\n                    <a href=\"#!\" class=\"small text-muted\">Privacy policy</a>\n                  </form>\n  \n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n\n<!--------design ends--------->\n\n\n\n<h5>Login</h5>\n<form *ngIf=\"!isLoggedIn\" name=\"form\" (ngSubmit)=\"f.form.valid && onSubmitLogin()\" #f=\"ngForm\" novalidate>\n  <label for=\"name\">Username or email address <span>*</span></label>\n  <input type=\"text\" class=\"form-control\" name=\"username\" [(ngModel)]=\"formLogin.username\" required #username=\"ngModel\">\n  <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"username.errors && f.submitted\">\n    Username is required!\n  </div>\n  <label for=\"pass\">Password <span>*</span></label>\n  <input type=\"password\" class=\"form-control\" name=\"password\" [(ngModel)]=\"formLogin.password\" required minlength=\"3\"\n    #password=\"ngModel\">\n  <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"password.errors && f.submitted\">\n    <div *ngIf=\"password.errors['required']\">Password is required</div>\n    <div *ngIf=\"password.errors['minlength']\">\n      Password must be at least 3 characters\n    </div>\n  </div>\n    <div class=\"login-action mb-10 fix\">\n      <span class=\"log-rem f-left\">\n        <input id=\"remember\" type=\"checkbox\">\n        <label for=\"remember\">Remember me</label>\n      </span>\n      <span class=\"forgot-login f-right\">\n        <a href=\"#\">Lost your password?</a>\n      </span>\n    </div>\n    <div class=\"form-group\">\n      <button class=\"tp-in-btn w-100\">Login</button>\n    </div>\n\n    <div class=\"alert alert-warning\" *ngIf=\"f.submitted && isLoginFailed\">\n      Login failed!<br />{{ errorMessage2 }}\n  </div>\n\n\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}